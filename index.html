<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>MoodSync - AI Mood Journal</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- Authentication Container -->
    <div id="authContainer" class="auth-container">
        <a href="landing/index.html" class="back-to-landing">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back to Home
        </a>
        <div class="auth-card">
            <div class="auth-logo">
                <h1>MoodSync</h1>
            </div>
            <p class="auth-subtitle">Your AI-Powered Daily Mood Journal</p>

            <!-- Sign In Form -->
            <div id="signInForm" class="auth-form">
                <h2>Welcome Back</h2>
                <p class="form-hint">First time? Click "Create Account" below</p>
                <div class="form-group">
                    <input type="email" id="signInEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="signInPassword" placeholder="Password" required>
                </div>
                <button class="btn-auth btn-primary" onclick="handleSignIn()">Sign In</button>
                
                <div class="auth-divider">
                    <span>or</span>
                </div>
                
                <button class="btn-auth btn-google" onclick="handleGoogleSignIn()">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9c0 1.452.348 2.827.957 4.042l3.007-2.335z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Continue with Google
                </button>
                
                <div class="auth-links">
                    <a href="#" onclick="showForgotPassword(); return false;">Forgot Password?</a>
                    <a href="#" onclick="showSignUp(); return false;">Create Account</a>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div id="signUpForm" class="auth-form" style="display: none;">
                <h2>Create Account</h2>
                <div class="form-group">
                    <input type="text" id="signUpName" placeholder="Display Name" required>
                </div>
                <div class="form-group">
                    <input type="email" id="signUpEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="signUpPassword" placeholder="Password (min 6 characters)" required>
                </div>
                <button class="btn-auth btn-primary" onclick="handleSignUp()">Create Account</button>
                
                <div class="auth-divider">
                    <span>or</span>
                </div>
                
                <button class="btn-auth btn-google" onclick="handleGoogleSignIn()">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9c0 1.452.348 2.827.957 4.042l3.007-2.335z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Sign up with Google
                </button>
                
                <div class="auth-links">
                    <a href="#" onclick="showSignIn(); return false;">Already have an account? Sign In</a>
                </div>
            </div>

            <!-- Forgot Password Form -->
            <div id="forgotPasswordForm" class="auth-form" style="display: none;">
                <h2>Reset Password</h2>
                <p class="form-description">Enter your email and we'll send you a reset link</p>
                <div class="form-group">
                    <input type="email" id="resetEmail" placeholder="Email" required>
                </div>
                <button class="btn-auth btn-primary" onclick="handleResetPassword()">Send Reset Link</button>
                <div class="auth-links">
                    <a href="#" onclick="showSignIn(); return false;">Back to Sign In</a>
                </div>
            </div>

            <div id="authMessage" class="auth-message"></div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="mainApp" class="container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div>
                        <h1>MoodSync</h1>
                        <p class="subtitle">Your AI-Powered Daily Mood Journal</p>
                    </div>
                </div>
                <div class="user-menu">
                    <div class="user-info">
                        <span class="user-name" id="userName">User</span>
                        <span class="user-email" id="userEmail">user@email.com</span>
                    </div>
                    <button class="btn-signout" onclick="handleSignOut()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        Sign Out
                    </button>
                </div>
            </div>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-icon">üî•</div>
                <div class="stat-info">
                    <div class="stat-value" id="streakValue">0</div>
                    <div class="stat-label">Day Streak</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìù</div>
                <div class="stat-info">
                    <div class="stat-value" id="totalEntries">0</div>
                    <div class="stat-label">Total Entries</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üòä</div>
                <div class="stat-info">
                    <div class="stat-value" id="dominantMood">-</div>
                    <div class="stat-label">This Week</div>
                </div>
            </div>
        </div>

        <!-- Quote Section -->
        <div class="quote-card">
            <svg class="quote-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
            </svg>
            <div class="quote-content">
                <p class="quote-text" id="quoteText">Loading inspirational quote...</p>
                <p class="quote-author" id="quoteAuthor"></p>
            </div>
        </div>

        <!-- Journal Section -->
        <div class="journal-section">
            <h2 class="section-title">
                <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
                How are you feeling today?
            </h2>
            <textarea 
                id="journalInput" 
                class="journal-textarea"
                placeholder="Write about your day, thoughts, or feelings... Be honest with yourself üí≠"
                rows="6"
            ></textarea>
            <div class="journal-footer">
                <div class="char-count">
                    <span id="charCount">0</span> characters
                </div>
                <button class="btn-save" id="saveBtn">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    Save Entry
                </button>
            </div>
            <div id="loadingMessage" class="loading-message"></div>
            <div id="errorMessage" class="error-message"></div>
        </div>

        <!-- Mood Display -->
        <div class="mood-display" id="moodDisplay">
            <div class="mood-content">
                <div class="mood-emoji" id="moodEmoji"></div>
                <h3 class="mood-label" id="moodLabel"></h3>
                <p class="mood-reply" id="moodReply"></p>
            </div>
            <div id="spotifyPlayer" class="spotify-player"></div>
        </div>

        <!-- Weekly Summary -->
        <div class="summary-card">
            <h2 class="section-title">
                <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                Weekly Summary
            </h2>
            <p class="summary-text" id="summaryText">Start journaling to see your weekly insights!</p>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3 class="chart-title">
                    <svg class="chart-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </svg>
                    Weekly Mood Trends
                </h3>
                <canvas id="weeklyChart"></canvas>
            </div>
            <div class="chart-card">
                <h3 class="chart-title">
                    <svg class="chart-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a10 10 0 0 1 10 10"/>
                    </svg>
                    Monthly Distribution
                </h3>
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>

        <!-- Past Entries -->
        <div class="entries-section">
            <h2 class="section-title">
                <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                </svg>
                Your Journal Entries
            </h2>
            <div id="entriesList" class="entries-list"></div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with üíô by Subharup</p>
            <p class="footer-note">Your journey to better mental health</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script type="module" src="config.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>